<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="./assets/CSS/reset.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="./assets/CSS/styles.css">
  <title>io.n</title>
</head>

<body>
  <div class="navbar">
    <nav class="white blue-text">
      <div class="nav-wrapper">
        <a href="./dashboard.html" class="brand-logo logo-text"><img src="./assets/images/lot17a-logo-small.png" alt="lot17a"
            id="brandLogo"></a>
        <ul class="right">
          <li><a href="#" class="nav-links">Notifications<span class="new badge" id="alerts">4</span></a></li>
          <li><a href="#" class="nav-links valign-wrapper"><span id="userFirst">user</span> &nbsp;<span id="userLast">name</span>&nbsp;<img
                src="" alt="user photo" id="userPhoto"></a></li>
        </ul>
      </div>
    </nav>
  </div>
  <!-- sidenav -->
  <div class="row">
    <div class="navbar-fixed col s2 m2 l2">
      <div style="height: 1px;">
        <ul class="section table-of-contents">
          <li>
            <a href="dashboard.html" class="">Dashboard</a>
          </li>
          <li>
            <a href="inventory.html" class="">Inventory</a>
          </li>
          <li>
            <a href="sales.html" class="">Sales</a>
          </li>
          <li>
            <a href="employees.html" class="active">Employees</a>
          </li>
          <li>
            <a href="goals.html" class="">Goals</a>
          </li>
          <li>
            <a class="grey-text darken-4" onclick="logout()">Logout</a>
          </li>
        </ul>
      </div>
    </div>
    <!-- cards -->
    <div class="col s10 l10">
      <!-- main content -->
      <div class="mainContent center-align">
        <div class="card col s12 m6 l5">
          <div class="card-content">
            <span class="card-title activator grey-text text-darken-4">Today's Employees</span>
            <ul class="collection">
              <li class="collection-item avatar">
                <img src="./assets/images/employee/amaclaine.jpeg" alt="amaclaine" class="circle employeePic">
                <span class="title">Phone: 123-456-7890</span>
                <p>amaclaine@lot17a.com</p>
              </li>
              <li class="collection-item avatar">
                <img src="./assets/images/employee/qfults.jpeg" alt="qfults" class="circle employeePic">
                <span class="title">Phone: 123-456-7890</span>
                <p>qfults@lot17a.com</p>
              </li>
              <li class="collection-item avatar">
                <img src="./assets/images/employee/marranz.jpeg" alt="marranz" class="circle employeePic">
                <span class="title">Phone: 123-456-7890</span>
                <p>marranz@lot17a.com</p>
              </li>
              <li class="collection-item avatar">
                <img src="./assets/images/employee/lsalcido.jpeg" alt="lsalcido" class="circle employeePic">
                <span class="title">Phone: 123-456-7890</span>
                <p>lsalcido@lot17a.com</p>
              </li>
              <li class="collection-item avatar">
                <img src="./assets/images/employee/aroush.jpeg" alt="aroush" class="circle employeePic">
                <span class="title">Phone: 123-456-7890</span>
                <p>aroush@lot17a.com</p>
              </li>
            </ul>
            <a class="btn-floating btn-sm waves-effect waves-light addEmployee"><i class="material-icons">add</i></a>
          </div>
        </div>
        <div class="card col s12 m6 l5">
          <div class="card-content">
            <span class="card-title activator grey-text text-darken-4">Sales Leaders</span>
            <canvas id="employeeSales" width="400" height="513"></canvas>
          </div>
        </div>
        <div class="card col s12 m10 l10">
          <div class="card-content">
            <span class="card-title activator grey-text text-darken-4">Employee Weekly Schedule</span>
            <p>Sun-Mon, Nov 25 - Dec 1, 2018</p>
            <table class="striped centered responsive-table employeeSchedule">
              <thead class="scheduleHeader">
                <tr>
                  <th>Name</th>
                  <th>Employee ID</th>
                  <th>Su</th>
                  <th>M</th>
                  <th>Tu</th>
                  <th>W</th>
                  <th>Th</th>
                  <th>F</th>
                  <th>Sa</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>AMaclaine</td>
                  <td>1</td>
                  <td>OFF</td>
                  <td>12-8pm</td>
                  <td>12-6pm</td>
                  <td>2-10pm</td>
                  <td>OFF</td>
                  <td>12-8pm</td>
                  <td>4-12am</td>
                </tr>
                <tr>
                  <td>QFults</td>
                  <td>2</td>
                  <td>4-12am</td>
                  <td>OFF</td>
                  <td>12-8pm</td>
                  <td>2-10pm</td>
                  <td>12-6pm</td>
                  <td>12-8pm</td>
                  <td>OFF</td>
                </tr>
                <tr>
                  <td>MArranz</td>
                  <td>3</td>
                  <td>2-10pm</td>
                  <td>4-12am</td>
                  <td>OFF</td>
                  <td>12-8pm</td>
                  <td>12-8pm</td>
                  <td>OFF</td>
                  <td>12-6pm</td>
                </tr>
                <tr>
                  <td>LSalcido</td>
                  <td>4</td>
                  <td>2-10pm</td>
                  <td>12-6pm</td>
                  <td>4-12am</td>
                  <td>OFF</td>
                  <td>OFF</td>
                  <td>4-12am</td>
                  <td>2-10pm</td>
                </tr>
                <tr>
                  <td>ARoush</td>
                  <td>5</td>
                  <td>12-8pm</td>
                  <td>OFF</td>
                  <td>OFF</td>
                  <td>4-12am</td>
                  <td>4-12am</td>
                  <td>2-10pm</td>
                  <td>2-10pm</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- Compiled and minified JavaScript -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.js"></script>
        <script>

          // doughnut tooltip plugin
          Chart.pluginService.register({
            beforeRender: function (chart) {
              if (chart.config.options.showAllTooltips) {
                // create an array of tooltips
                // we can't use the chart tooltip because there is only one tooltip per chart
                chart.pluginTooltips = [];
                chart.config.data.datasets.forEach(function (dataset, i) {
                  chart.getDatasetMeta(i).data.forEach(function (sector, j) {
                    chart.pluginTooltips.push(new Chart.Tooltip({
                      _chart: chart.chart,
                      _chartInstance: chart,
                      _data: chart.data,
                      _options: chart.options.tooltips,
                      _active: [sector]
                    }, chart));
                  });
                });
                // turn off normal tooltips
                chart.options.tooltips.enabled = false;
              }
            },
            afterDraw: function (chart, easing) {
              if (chart.config.options.showAllTooltips) {
                // we don't want the permanent tooltips to animate, so don't do anything till the animation runs atleast once
                if (!chart.allTooltipsOnce) {
                  if (easing !== 1)
                    return;
                  chart.allTooltipsOnce = true;
                }
                // turn on tooltips
                chart.options.tooltips.enabled = true;
                Chart.helpers.each(chart.pluginTooltips, function (tooltip) {
                  tooltip.initialize();
                  tooltip.update();
                  // we don't actually need this since we are not animating tooltips
                  tooltip.pivot();
                  tooltip.transition(easing).draw();
                });
                chart.options.tooltips.enabled = false;
              }
            }
          });

          // Variables
          let employeeSalesArray = []
          // Fetch all of the sales data
          function breweryData() {
            fetch(`sales/${moment().startOf('year').format('YYYYMMDD')}-${moment().format('YYYYMMDD')}`)
              .then(r => r.json())
              .then(r => {
                console.log(r)
                timeInterval(r)
                employeeSalesGraph(employeeSalesArray)
              })
              .catch(e => console.log(e))
          }
          // Sales by Employee
          function employeeSalesGraph(employeeSalesArray) {
            let empSales = document.getElementById("employeeSales");
            let employeeSales = new Chart(empSales, {
              type: 'bar',
              data: {
                labels: ["AMaclaine", "QFults", "MArranz", "LSalcido", "ARoush"],
                datasets: [{
                  label: 'Sales by Employee',
                  data: employeeSalesArray,
                  backgroundColor: [
                    '#d1a827',
                    '#d1a827',
                    '#d1a827',
                    '#d1a827',
                    '#d1a827',
                  ]
                }]
              },
              options: {
                scales: {
                  yAxes: [{
                    ticks: {
                      beginAtZero: true
                    }
                  }]
                }
              }
            });
          }
        </script>
        <script src="./assets/Js/session.js"></script>
</body>

</html>